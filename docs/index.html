<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>weapp-pandacss</title><meta name="description" content="Documentation for weapp-pandacss"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/search.js" id="tsd-search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">weapp-pandacss</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-content">
<div class="tsd-page-title">
<h2>weapp-pandacss</h2></div>
<div class="tsd-panel tsd-typography"><a id="md:weapp-pandacss" class="tsd-anchor"></a><h1><a href="#md:weapp-pandacss">weapp-pandacss</a></h1><p><a href="https://codecov.io/gh/sonofmagic/weapp-pandacss"><img src="https://codecov.io/gh/sonofmagic/weapp-pandacss/branch/main/graph/badge.svg?token=vnU71Pxj3P" alt="codecov"></a>
<img src="https://badgen.net/github/stars/sonofmagic/weapp-pandacss" alt="star">
<img src="https://badgen.net/npm/dm/weapp-pandacss" alt="dm0">
<img src="https://badgen.net/npm/license/weapp-pandacss" alt="license"></p>
<ul>
<li><a href="#weapp-pandacss">weapp-pandacss</a><ul>
<li><a href="#%E4%BB%8B%E7%BB%8D">介绍</a></li>
<li><a href="#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B">快速开始</a><ul>
<li><a href="#pandacss-%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE">pandacss 安装和配置</a><ul>
<li><a href="#0-%E5%AE%89%E8%A3%85%E5%92%8C%E5%88%9D%E5%A7%8B%E5%8C%96-pandacss">0. 安装和初始化 pandacss</a></li>
<li><a href="#1-%E9%85%8D%E7%BD%AE-postcss">1. 配置 postcss</a></li>
<li><a href="#2-%E6%A3%80%E6%9F%A5%E4%BD%A0%E7%9A%84-pandaconfigts">2. 检查你的 panda.config.ts</a></li>
<li><a href="#3-%E4%BF%AE%E6%94%B9-packagejson-%E8%84%9A%E6%9C%AC">3. 修改 package.json 脚本</a></li>
<li><a href="#4-%E5%85%A8%E5%B1%80-css-%E6%B3%A8%E5%86%8C-pandacss">4. 全局 css 注册 pandacss</a></li>
<li><a href="#5-%E9%85%8D%E7%BD%AE%E7%9A%84%E4%BC%98%E5%8C%96%E4%B8%8E%E5%88%AB%E5%90%8D">5. 配置的优化与别名</a></li>
</ul>
</li>
<li><a href="#weapp-pandacss-%E9%85%8D%E7%BD%AE">weapp-pandacss 配置</a><ul>
<li><a href="#0-%E5%9B%9E%E5%88%B0-postcss-%E8%BF%9B%E8%A1%8C%E6%B3%A8%E5%86%8C">0. 回到 postcss 进行注册</a></li>
<li><a href="#1-%E5%9B%9E%E5%88%B0-packagejson-%E6%B7%BB%E5%8A%A0%E7%94%9F%E6%88%90%E8%84%9A%E6%9C%AC">1. 回到 package.json 添加生成脚本</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E8%B7%A8%E5%B9%B3%E5%8F%B0%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">跨平台注意事项</a></li>
<li><a href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%A2%84%E8%A7%88%E4%BA%8B%E9%A1%B9">小程序预览事项</a></li>
<li><a href="#%E9%AB%98%E7%BA%A7%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">高级配置文件</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE%E9%A1%B9%E5%88%97%E8%A1%A8">配置项列表</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E7%A4%BA%E4%BE%8B">参考示例</a></li>
<li><a href="#bugs--issues">Bugs &amp; Issues</a></li>
</ul>
</li>
</ul>
<a id="md:介绍" class="tsd-anchor"></a><h2><a href="#md:介绍">介绍</a></h2><p><a href="https://panda-css.com/"><code>pandacss</code></a> 是个优秀的 <code>CSS-in-JS</code> 编译时框架，原子化和 <code>[jt]sx?</code> 文件相结合的写法灵活而又令人印象深刻，而 <code>weapp-pandacss</code> 就是让你在小程序开发中使用它。</p>
<a id="md:快速开始" class="tsd-anchor"></a><h2><a href="#md:快速开始">快速开始</a></h2><a id="md:pandacss-安装和配置" class="tsd-anchor"></a><h3><a href="#md:pandacss-安装和配置">pandacss 安装和配置</a></h3><a id="md:0-安装和初始化-pandacss" class="tsd-anchor"></a><h4><a href="#md:0-安装和初始化-pandacss">0. 安装和初始化 pandacss</a></h4><p>首先我们需要把 <code>@pandacss/dev</code> 这些都安装和配置好，这里我们以 <code>tarojs</code> 项目为例：</p>
<pre><code class="language-bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-3">-D</span><span class="hl-1"> </span><span class="hl-2">@pandacss/dev</span><span class="hl-1"> </span><span class="hl-2">weapp-pandacss</span><span class="hl-1"> </span><span class="hl-2">postcss</span><span class="hl-1"> </span><span class="hl-4"># 或者 yarn / pnpm</span><br/><span class="hl-0">npx</span><span class="hl-1"> </span><span class="hl-2">panda</span><span class="hl-1"> </span><span class="hl-2">init</span>
</code><button>Copy</button></pre>
<p>此时会在当前目录生成一个 <code>panda.config.ts</code> 和一个包含大量文件的 <code>styled-system</code>。</p>
<blockquote>
<p><code>panda.config.ts</code> 是 <code>pandacss</code> 的配置文件，<code>styled-system</code> 文件夹里的是 <code>pandacss</code> 的运行时 <code>js</code>。</p>
</blockquote>
<p>把 <code>styled-system</code> 加入我们的 <code>.gitignore</code> 中去。</p>
<pre><code class="language-diff"><span class="hl-4"># .gitignore</span><br/><span class="hl-5">+ styled-system</span>
</code><button>Copy</button></pre>
<a id="md:1-配置-postcss" class="tsd-anchor"></a><h4><a href="#md:1-配置-postcss">1. 配置 postcss</a></h4><p>接着在根目录里，添加一个 <code>postcss.config.cjs</code> 文件，写入以下代码注册 <code>pandacss</code>:</p>
<pre><code class="language-js"><span class="hl-6">module</span><span class="hl-1">.</span><span class="hl-6">exports</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-7">plugins:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">&#39;@pandacss/dev/postcss&#39;</span><span class="hl-7">:</span><span class="hl-1"> {}</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:2-检查你的-pandaconfigts" class="tsd-anchor"></a><h4><a href="#md:2-检查你的-pandaconfigts">2. 检查你的 panda.config.ts</a></h4><p>生成的配置文件大概长下面这样，尤其注意 <code>include</code> 是用来告诉 <code>pandacss</code> 从哪些文件中提取原子类的，所以这个配置一定要准确</p>
<pre><code class="language-ts"><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-7">defineConfig</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@pandacss/dev&quot;</span><br/><br/><span class="hl-8">export</span><span class="hl-1"> </span><span class="hl-8">default</span><span class="hl-1"> </span><span class="hl-0">defineConfig</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">// 小程序不需要</span><br/><span class="hl-1">  </span><span class="hl-7">preflight:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">TARO_ENV</span><span class="hl-1"> === </span><span class="hl-2">&#39;h5&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">// ⚠️这里，假如你使用 vue，记得把 vue 文件格式包括进来！！！</span><br/><span class="hl-1">  </span><span class="hl-7">include:</span><span class="hl-1"> [</span><span class="hl-2">&quot;./src/**/*.{js,jsx,ts,tsx}&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-7">exclude:</span><span class="hl-1"> [],</span><br/><span class="hl-1">  </span><span class="hl-7">theme:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">extend:</span><span class="hl-1"> {}</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-7">outdir:</span><span class="hl-1"> </span><span class="hl-2">&quot;styled-system&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">})</span>
</code><button>Copy</button></pre>
<a id="md:3-修改-packagejson-脚本" class="tsd-anchor"></a><h4><a href="#md:3-修改-packagejson-脚本">3. 修改 package.json 脚本</a></h4><p>然后，我们添加下方 <code>prepare</code> 脚本在我们的 <code>package.json</code> 的 <code>scripts</code> 块中:</p>
<pre><code class="language-diff"><span class="hl-1">{</span><br/><span class="hl-1">  &quot;scripts&quot;: {</span><br/><span class="hl-5">+    &quot;prepare&quot;: &quot;panda codegen&quot;,</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>这样我们每次重新 <code>npm i/yarn/pnpm i</code> 的时候，都会执行这个方法，重新生成 <code>styled-system</code>，当然你也可以直接通过 <code>npm run prepare</code> 直接执行这个脚本。</p>
<a id="md:4-全局-css-注册-pandacss" class="tsd-anchor"></a><h4><a href="#md:4-全局-css-注册-pandacss">4. 全局 css 注册 pandacss</a></h4><p>然后在我们的全局样式文件 <code>src/app.scss</code> 中注册 <code>pandacss</code>:</p>
<pre><code class="language-css"><span class="hl-8">@layer</span><span class="hl-1"> reset, base, tokens, recipes, utilities;</span>
</code><button>Copy</button></pre>
<p>配置好了之后，此时 <code>pandacss</code> 在 <code>h5</code> 平台已经生效了，你可以 <code>npm run dev:h5</code> 在 <code>h5</code> 平台初步使用了，但是为了开发体验，我们还有一些优化项要做。</p>
<a id="md:5-配置的优化与别名" class="tsd-anchor"></a><h4><a href="#md:5-配置的优化与别名">5. 配置的优化与别名</a></h4><p>来到根目录的 <code>tsconfig.json</code> 添加:</p>
<pre><code class="language-diff"><span class="hl-1">{</span><br/><span class="hl-1">  &quot;compilerOptions&quot;: {</span><br/><span class="hl-1">    &quot;paths&quot;: {</span><br/><span class="hl-1">      &quot;@/*&quot;: [</span><br/><span class="hl-1">        &quot;src/*&quot;</span><br/><span class="hl-1">      ],</span><br/><span class="hl-5">+      &quot;styled-system/*&quot;: [</span><br/><span class="hl-5">+        &quot;styled-system/*&quot;</span><br/><span class="hl-5">+      ]</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  &quot;include&quot;: [</span><br/><span class="hl-1">    &quot;./src&quot;,</span><br/><span class="hl-1">    &quot;./types&quot;,</span><br/><span class="hl-1">    &quot;./config&quot;,</span><br/><span class="hl-5">+    &quot;styled-system&quot;</span><br/><span class="hl-1">  ],</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>接着来到 <code>config/index.ts</code> 添加 <code>alias</code>(<a href="https://taro-docs.jd.com/docs/config-detail#alias">参考链接</a>):</p>
<pre><code class="language-ts"><span class="hl-8">import</span><span class="hl-1"> </span><span class="hl-7">path</span><span class="hl-1"> </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-2">&#39;path&#39;</span><br/><br/><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">alias</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-2">&#39;styled-system&#39;</span><span class="hl-1">: </span><span class="hl-7">path</span><span class="hl-1">.</span><span class="hl-0">resolve</span><span class="hl-1">(</span><span class="hl-7">__dirname</span><span class="hl-1">, </span><span class="hl-2">&#39;..&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;styled-system&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>这样我们就不需要使用相对路径来使用 <code>pandacss</code> 了，同时 <code>ts</code> 智能提示也有了，你可以这样使用它:</p>
<pre><code class="language-ts"><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-7">View</span><span class="hl-1">, </span><span class="hl-7">Text</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@tarojs/components&quot;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-7">css</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-2">&quot;styled-system/css&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-9">styles</span><span class="hl-1"> = </span><span class="hl-0">css</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-7">bg:</span><span class="hl-1"> </span><span class="hl-2">&quot;yellow.200&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">rounded:</span><span class="hl-1"> </span><span class="hl-2">&quot;9999px&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">fontSize:</span><span class="hl-1"> </span><span class="hl-2">&quot;90px&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">p:</span><span class="hl-1"> </span><span class="hl-2">&quot;10px 15px&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">color:</span><span class="hl-1"> </span><span class="hl-2">&quot;pink.500&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-8">export</span><span class="hl-1"> </span><span class="hl-8">default</span><span class="hl-1"> </span><span class="hl-3">function</span><span class="hl-1"> </span><span class="hl-0">Index</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-8">return</span><span class="hl-1"> (</span><br/><span class="hl-1">    &lt;</span><span class="hl-7">View</span><span class="hl-1"> </span><span class="hl-7">className</span><span class="hl-1">={</span><span class="hl-7">styles</span><span class="hl-1">}&gt;</span><br/><span class="hl-1">      &lt;</span><span class="hl-6">Text</span><span class="hl-1">&gt;</span><span class="hl-7">Hello</span><span class="hl-1"> </span><span class="hl-7">world</span><span class="hl-1">!&lt;/</span><span class="hl-7">Text</span><span class="hl-1">&gt;</span><br/><span class="hl-1">    &lt;/</span><span class="hl-7">View</span><span class="hl-1">&gt;</span><br/><span class="hl-1">  );</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<blockquote>
<p>此部分参考的官方链接 <a href="https://panda-css.com/docs/installation/postcss">https://panda-css.com/docs/installation/postcss</a></p>
</blockquote>
<p>接下来进入 <code>weapp-pandacss</code> 的插件配置，不用担心，相比前面那些繁琐的步骤，这个可简单多了。</p>
<a id="md:weapp-pandacss-配置" class="tsd-anchor"></a><h3><a href="#md:weapp-pandacss-配置">weapp-pandacss 配置</a></h3><blockquote>
<p>记得安装好 <code>weapp-pandacss</code> !</p>
</blockquote>
<a id="md:0-回到-postcss-进行注册" class="tsd-anchor"></a><h4><a href="#md:0-回到-postcss-进行注册">0. 回到 postcss 进行注册</a></h4><p>回到项目根目录的 <code>postcss.config.cjs</code> 注册 <code>weapp-pandacss</code>，添加以下配置:</p>
<pre><code class="language-diff"><span class="hl-1">module.exports = {</span><br/><span class="hl-1">  plugins: {</span><br/><span class="hl-1">    &#39;@pandacss/dev/postcss&#39;: {},</span><br/><span class="hl-5">+   &#39;weapp-pandacss/postcss&#39;: {}</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:1-回到-packagejson-添加生成脚本" class="tsd-anchor"></a><h4><a href="#md:1-回到-packagejson-添加生成脚本">1. 回到 package.json 添加生成脚本</a></h4><p>然后去 <code>package.json</code> 你添加 <code>prepare</code> 脚本的地方，加点代码</p>
<pre><code class="language-diff"><span class="hl-1">{</span><br/><span class="hl-1">  &quot;scripts&quot;: {</span><br/><span class="hl-2">-    &quot;prepare&quot;: &quot;panda codegen&quot;,</span><br/><span class="hl-5">+    &quot;prepare&quot;: &quot;panda codegen &amp;&amp; weapp-panda codegen&quot;,</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<blockquote>
<p>注意这里必须用 <code>&amp;&amp;</code> 而不能用 <code>&amp;</code>，<code>&amp;</code> 任务执行会并行不会等待，而 <code>&amp;&amp;</code> 会等待前一个执行完成再执行后一条命令</p>
</blockquote>
<p>然后，你再手动执行一下</p>
<pre><code class="language-bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">prepare</span>
</code><button>Copy</button></pre>
<p>来重新生成 <code>styled-system</code>, 此时你会发现 <code>pandacss</code> 的命令行输出中多了 <code>2</code> 行:</p>
<pre><code class="language-diff"><span class="hl-1">✔️ `src/styled-system/css`: the css function to author styles</span><br/><span class="hl-1">✔️ `src/styled-system/tokens`: the css variables and js function to query your tokens</span><br/><span class="hl-1">✔️ `src/styled-system/patterns`: functions to implement apply common layout patterns</span><br/><span class="hl-1">✔️ `src/styled-system/jsx`: styled jsx elements for react</span><br/><span class="hl-5">+ ✔️ `src/styled-system/weapp-panda`: the core escape function for weapp</span><br/><span class="hl-5">+ ✔️ `src/styled-system/helpers.mjs`: inject escape function into helpers</span>
</code><button>Copy</button></pre>
<p>这代表着小程序相关的转义逻辑已经被注入进去，此时 <code>panda css</code> 生成的类就兼容小程序平台啦，是不是很简单?</p>
<p>当然为了防止你配置失败，我也给出了参考项目: <a href="https://github.com/sonofmagic/taro-react-pandacss-template">taro-react-pandacss-template</a> 方便进行排查纠错。</p>
<a id="md:跨平台注意事项" class="tsd-anchor"></a><h2><a href="#md:跨平台注意事项">跨平台注意事项</a></h2><p>你可能同时开发 <code>小程序</code> 和 <code>h5</code> 平台，但是你发现使用 <code>weapp-pandacss</code> 之后，<code>h5</code> 平台似乎就不行了？</p>
<p>这时候你可以这样配置：</p>
<p><code>process.env.TARO_ENV === &#39;h5&#39;</code> 的时候，不去加载 <code>weapp-pandacss/postcss</code> (根据环境变量动态加载 <code>postcss</code> 插件)</p>
<p>同时你也可以执行 <code>weapp-panda rollback</code> 把 <code>css</code> 方法进行回滚到最原始适配 <code>h5</code> 平台的状态。</p>
<p>当然你恢复到小程序版本也只需要执行 <code>weapp-panda codegen</code> 就会重新注入了。</p>
<a id="md:小程序预览事项" class="tsd-anchor"></a><h2><a href="#md:小程序预览事项">小程序预览事项</a></h2><p>当小程序预览时会出现 <code>Error: 非法的文件，错误信息：invalid file: pages/index/index.js, 565:24, SyntaxError: Unexpected token . if (variants[key]?.[value])</code> 错误。</p>
<p>这是因为 <code>panda</code> 生成的文件 <code>cva.mjs</code> 使用了 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"><code>Optional chaining (?.)</code></a>语法，这个语法小程序原生不支持，这时候可以开启勾选 <code>将JS编译成ES5</code> 功能再进行预览，或者使用 <code>babel</code> 预先进行处理再上传预览。</p>
<a id="md:高级配置文件" class="tsd-anchor"></a><h2><a href="#md:高级配置文件">高级配置文件</a></h2><p>你可以通过 <code>npx weapp-panda init</code> 命令在当前目录下创建一个 <code>weapp-pandacss.config.ts</code> 配置文件。</p>
<p>这个配置文件可以用来控制转义代码的生成和一部分 <code>postcss</code> 插件的行为。</p>
<pre><code class="language-ts"><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-7">defineConfig</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-2">&#39;weapp-pandacss&#39;</span><br/><br/><span class="hl-8">export</span><span class="hl-1"> </span><span class="hl-8">default</span><span class="hl-1"> </span><span class="hl-0">defineConfig</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-7">postcss:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">// 转义插件是否生效，这只能控制核心插件的生效情况,而核心插件只是一部分</span><br/><span class="hl-1">    </span><span class="hl-4">// 假如你想让整个插件真正不生效，请在 `postcss.config.cjs` 里进行动态加载判断</span><br/><span class="hl-1">    </span><span class="hl-7">disabled:</span><span class="hl-1"> </span><span class="hl-3">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">// 数组merge默认行为是直接concat 合并，所以传一个空数组是使用的默认数组</span><br/><span class="hl-1">    </span><span class="hl-4">// 转义替换对象</span><br/><span class="hl-1">    </span><span class="hl-7">selectorReplacement:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-7">root:</span><span class="hl-1"> [],</span><br/><span class="hl-1">      </span><span class="hl-7">universal:</span><span class="hl-1"> [],</span><br/><span class="hl-1">      </span><span class="hl-7">cascadeLayers:</span><span class="hl-1"> </span><span class="hl-2">&#39;a&#39;</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-7">removeNegationPseudoClass:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">// 生成上下文</span><br/><span class="hl-1">  </span><span class="hl-7">context:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">// 转义注入判断条件，更改后需要重新生成代码</span><br/><span class="hl-1">    </span><span class="hl-7">escapePredicate:</span><span class="hl-1"> </span><span class="hl-2">`process.env.TARO_ENV !== &#39;h5&#39; &amp;&amp; process.env.TARO_ENV !== &#39;rn&#39;`</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">// 插件的 pandaConfig 寻找配置</span><br/><span class="hl-1">    </span><span class="hl-7">pandaConfig:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-7">cwd:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-0">cwd</span><span class="hl-1">(),</span><br/><span class="hl-1">      </span><span class="hl-7">file:</span><span class="hl-1"> </span><span class="hl-2">&#39;path/to/your-panda-config-file&#39;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">})</span>
</code><button>Copy</button></pre>
<p>当然，你更改相关的配置项之后，要重新执行一下 <code>npm run prepare</code> 来生成新的注入转义代码。</p>
<a id="md:配置项列表" class="tsd-anchor"></a><h2><a href="#md:配置项列表">配置项列表</a></h2><p>详见 <a href="https://sonofmagic.github.io/weapp-pandacss/">https://sonofmagic.github.io/weapp-pandacss/</a></p>
<a id="md:参考示例" class="tsd-anchor"></a><h2><a href="#md:参考示例">参考示例</a></h2><p><a href="https://github.com/sonofmagic/taro-react-pandacss-template">taro-react-pandacss-template</a></p>
<p><a href="./examples/taro-app">Taro-app react</a></p>
<p><a href="./examples/taro-app-vue3">Taro-app vue3</a></p>
<p><a href="./examples/uni-app-vue3">Uni-app vue3 vite</a></p>
<a id="md:bugs-amp-issues" class="tsd-anchor"></a><h2><a href="#md:bugs-amp-issues">Bugs &amp; Issues</a></h2><p>目前这个插件正在快速的开发中，如果遇到 <code>Bug</code> 或者想提出 <code>Issue</code></p>
<p><a href="https://github.com/sonofmagic/weapp-pandacss/issues">欢迎提交到此处</a></p>
</div></div>
<div class="col-sidebar">
<div class="page-menu">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)" id="icon-chevronDown"></path></svg>Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="#icon-chevronDown"></use></svg>On This Page</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li>
<ul>
<li><a href="#md:weapp-pandacss"><span>weapp-<wbr/>pandacss</span></a></li>
<li>
<ul>
<li><a href="#md:介绍"><span>介绍</span></a></li>
<li><a href="#md:快速开始"><span>快速开始</span></a></li>
<li>
<ul>
<li><a href="#md:pandacss-安装和配置"><span>pandacss 安装和配置</span></a></li>
<li>
<ul>
<li><a href="#md:0-安装和初始化-pandacss"><span>0. 安装和初始化 pandacss</span></a></li>
<li><a href="#md:1-配置-postcss"><span>1. 配置 postcss</span></a></li>
<li><a href="#md:2-检查你的-pandaconfigts"><span>2. 检查你的 panda.config.ts</span></a></li>
<li><a href="#md:3-修改-packagejson-脚本"><span>3. 修改 package.json 脚本</span></a></li>
<li><a href="#md:4-全局-css-注册-pandacss"><span>4. 全局 css 注册 pandacss</span></a></li>
<li><a href="#md:5-配置的优化与别名"><span>5. 配置的优化与别名</span></a></li></ul></li>
<li><a href="#md:weapp-pandacss-配置"><span>weapp-<wbr/>pandacss 配置</span></a></li>
<li>
<ul>
<li><a href="#md:0-回到-postcss-进行注册"><span>0. 回到 postcss 进行注册</span></a></li>
<li><a href="#md:1-回到-packagejson-添加生成脚本"><span>1. 回到 package.json 添加生成脚本</span></a></li></ul></li></ul></li>
<li><a href="#md:跨平台注意事项"><span>跨平台注意事项</span></a></li>
<li><a href="#md:小程序预览事项"><span>小程序预览事项</span></a></li>
<li><a href="#md:高级配置文件"><span>高级配置文件</span></a></li>
<li><a href="#md:配置项列表"><span>配置项列表</span></a></li>
<li><a href="#md:参考示例"><span>参考示例</span></a></li>
<li><a href="#md:bugs-amp-issues"><span>Bugs &amp; <wbr/>Issues</span></a></li></ul></li></ul></li></ul></div></details></div>
<div class="site-menu">
<nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><g id="icon-4"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-namespace)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M9.33 16V7.24H10.77L13.446 14.74C13.43 14.54 13.41 14.296 13.386 14.008C13.37 13.712 13.354 13.404 13.338 13.084C13.33 12.756 13.326 12.448 13.326 12.16V7.24H14.37V16H12.93L10.266 8.5C10.282 8.692 10.298 8.936 10.314 9.232C10.33 9.52 10.342 9.828 10.35 10.156C10.366 10.476 10.374 10.784 10.374 11.08V16H9.33Z" fill="var(--color-text)"></path></g></svg><span>weapp-<wbr/>pandacss</span></a>
<ul class="tsd-small-nested-navigation">
<li><a href="interfaces/ICreateContextOptions.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><g id="icon-256"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-interface)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M9.51 16V15.016H11.298V8.224H9.51V7.24H14.19V8.224H12.402V15.016H14.19V16H9.51Z" fill="var(--color-text)"></path></g></svg><span>ICreate<wbr/>Context<wbr/>Options</span></a></li>
<li><a href="interfaces/IPostcssPluginOptions.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-256"></use></svg><span>IPostcss<wbr/>Plugin<wbr/>Options</span></a></li>
<li><a href="interfaces/UserConfig.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="#icon-256"></use></svg><span>User<wbr/>Config</span></a></li>
<li><a href="types/PandacssConfigFileOptions.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><g id="icon-4194304"><rect fill="var(--color-icon-background)" stroke="var(--color-ts-type-alias)" stroke-width="1.5" x="1" y="1" width="22" height="22" rx="6"></rect><path d="M11.31 16V8.224H8.91V7.24H14.79V8.224H12.39V16H11.31Z" fill="var(--color-text)"></path></g></svg><span>Pandacss<wbr/>Config<wbr/>File<wbr/>Options</span></a></li></ul></nav></div></div></div>
<div class="tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div></body></html>